<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>我的银行卡</title>
    <link rel="stylesheet" href="../js/lib/weuijs/style/weuijs.min.css">
    <link rel="stylesheet" href="../css/ui-base.css">
</head>

<body>
    <div id="card-list" class="page__content">
    </div>
    <a class="weui-panel weui-panel_access" href="add-bank-card.html">
		<div class="weui-panel__bd">
			<div class="weui-media-box weui-media-box_appmsg">
				<div class="weui-media-box__hd">
				</div>
				<div class="weui-media-box__bd">
					<h4 class="weui-media-box__title" align="center">
						<p>添加银行卡</p>
					</h4>
				</div>
			</div>
		</div>
	</a>  
    <script type="text/javascript" src="../js/lib/zepto.min.js"></script>
    <script type="text/javascript" src="../js/lib/weuijs/weuijs.min.js"></script>
    <script id="card-templ" type="text/html">
        {{each rows as row i}}
        <div class="weui-panel weui-panel_access">
            <div class="weui-panel__bd">
                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
                    <div class="weui-media-box__hd">
                        <!-- <img class="weui-media-box__thumb" src="../images/icon_nav_panel.png" alt=""> -->
                        <i class="icon-bank-card" style="width: 60px; height: 60px;"></i>
                    </div>
                    <div class="weui-media-box__bd">
                        <h4 class="weui-media-box__title">
                        <p>{{row.bank_nm}}</p>
                        <p>{{row.bank_acct_no | formatCardNo}}</p>
                        </h4>
                    </div>
                </a>
            </div>
        </div>    
        {{/each}}
    </script>
    <script type="text/javascript">
    template.helper('formatCardNo', function (cardNo) {
        return cardNo.replace(/(\S{4})(?=\S)/g, "$1 ");
    });
    $(function() {
        $$.request('/action/user/card-info/list', {}, function(data) {
            $('#card-list').append(template('card-templ', data));
        });
    });
    </script>
</body>

</html>
